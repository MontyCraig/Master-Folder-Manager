#!/bin/bash

# Run path sanitization before commit
python tools/git_setup.py prepare

# Store the result
RESULT=$?

# Only proceed if sanitization was successful
if [ $RESULT -eq 0 ]; then
    # Check if .efm_config.json exists
    if [ -f "$HOME/.efm_config.json" ]; then
        # Add sanitized config file
        git add "$HOME/.efm_config.json"
    fi
fi

# Restore development paths
python tools/git_setup.py restore

exit $RESULT 